<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>United States National Parks - Map</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;500&display=swap" rel="stylesheet">  
    <link rel="stylesheet" type="text/css" href="https://cdn.skypack.dev/maplibre-gl/dist/maplibre-gl.css">   

</head>
<body>
    <nav class="navbar">
        <ul class="navbar-nav">
            <li class="logo">
                <a href="#" class="nav-link">
                    <span class="link-text">US National Parks</span>
                    <svg 
                        aria-hidden="true" 
                        focusable="false" 
                        data-prefix="fas" 
                        data-icon="bars" 
                        class="svg-inline--fa fa-bars fa-w-14" 
                        role="img" 
                        xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 448 512"
                    >
                        <path 
                        fill="currentColor" 
                        d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z">
                        </path>
                    </svg>
                </a>
            </li>
            <li class="nav-item">
                <a href="index.html" class="nav-link">
                    <svg 
                        aria-hidden="true" 
                        focusable="false" 
                        data-prefix="fas" 
                        data-icon="map-marked-alt" 
                        class="svg-inline--fa fa-map-marked-alt fa-w-18" 
                        role="img" 
                        xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 576 512"
                    >
                        <path 
                            fill="currentColor" 
                            d="M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z">
                        </path>
                    </svg>
                    <span class="link-text">Map</span>
                </a>
            </li>
        <!--    <li class="nav-item">
                <a href="#" class="nav-link">
                    <svg 
                        aria-hidden="true" 
                        focusable="false" 
                        data-prefix="far" 
                        data-icon="check-square" 
                        role="img" 
                        xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 448 512"
                        class="svg-inline--fa fa-check-square fa-w-14" 
                    >
                        <path 
                            fill="currentColor" 
                            d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm0 400H48V80h352v352zm-35.864-241.724L191.547 361.48c-4.705 4.667-12.303 4.637-16.97-.068l-90.781-91.516c-4.667-4.705-4.637-12.303.069-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l59.792 60.277 141.352-140.216c4.705-4.667 12.303-4.637 16.97.068l22.536 22.718c4.667 4.706 4.637 12.304-.068 16.971z">
                        </path>
                    </svg>
                    <span class="link-text">Visited</span>
                </a>
            </li> -->

            <li class="nav-item">
                <a href="list.html" class="nav-link">
                    <svg 
                        aria-hidden="true" 
                        focusable="false" 
                        data-prefix="fas" 
                        data-icon="list-ul" 
                        class="svg-inline--fa fa-list-ul fa-w-16" 
                        role="img" 
                        xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 512 512"
                    >
                        <path 
                            fill="currentColor" 
                            d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z">
                        </path>
                    </svg>
                    <span class="link-text">List View</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="search.html" class="nav-link">
                    <svg 
                        aria-hidden="true" 
                        focusable="false" 
                        data-prefix="fas" 
                        data-icon="search" 
                        class="svg-inline--fa fa-search fa-w-16" 
                        role="img" 
                        xmlns="http://www.w3.org/2000/svg" 
                        viewBox="0 0 512 512"
                    >
                        <path 
                        fill="currentColor" 
                        d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z">
                        </path>
                    </svg>
                    <span class="link-text">Search</span>
                </a>
            </li>
            <li class="caption">
                <a href="#" class="nav-link">
                    <span class="link-text">Created by Michael Allcock - CS361</span>
                </a>
            </li>
        </ul>
    </nav>
    <header>
        <h1>United States National Parks</h1>
    </header>
    <main>
        <div class="map">
            <div id="my-map">
                <iframe width="100%" height="740"></iframe>
            </div>
        </div> 

      <!--  <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1b5nxPMpyCS7ML_GRyFmgzJxxoGCPvLHy" width="100%" height="750"></iframe> -->
    </main>

    <script type="module">
        import maplibregl from 'https://cdn.skypack.dev/maplibre-gl@2.0.0-pre.5';    

        var names = ['Denali', 'Gates of the Arctic', 'Glacier Bay', 'Katmai', 'Kenai Fjords', 'Kobuk Valley', 'Lake Clark', 'Wrangell - St. Elias',
                        'American Samoa', 'Grand Canyon', 'Petrified Forest', 'Saguaro', 'Hot Springs', 'Channel Islands', 'Death Valley',
                        'Joshua Tree', 'Kings Canyon', 'Lassen Volcanic', 'Pinnacles', 'Redwood', 'Sequoia', 'Yosemite', 'Black Canyon of the Gunnison',
                        'Great Sand Dunes', 'Mesa Verde', 'Rocky Mountain', 'Biscayne', 'Dry Tortugas', 'Everglades', 'Haleakalā',
                        'Hawai’i Volcanoes', 'Indiana Dunes', 'Mammoth Cave', 'Acadia', 'Isle Royale', 'Voyageurs', 'Gateway Arch', 'Glacier',
                        'Great Basin', 'Carlsbad Caverns', 'White Sands', 'Great Smoky Mountains', 'Theodore Roosevelt', 'Cuyahoga Valley', 'Crater Lake',
                        'Congaree', 'Badlands', 'Wind Cave', 'Big Bend', 'Guadalupe Mountains', 'Virgin Islands', 'Arches', 'Bryce Canyon', 'Canyonlands',
                        'Capitol Reef', 'Zion', 'Shenandoah', 'Mount Rainier', 'North Cascades', 'Olympic', 'New River Gorge', 'Grand Teton', 'Yellowstone']
        //console.log(names);
        
        var coords = [[ -151.187402, 63.097595 ], [ -153.213442, 67.867944 ], [ -136.841242, 58.613727 ], [ -155.070656, 58.610206 ], [ -150.191176, 59.843258 ],
                        [ -159.127815, 67.332592 ], [ -153.360524, 60.550586 ], [ -142.983326, 61.700025 ], [ -170.683657, -14.258294 ], [ -112.112666, 36.097756 ],
                        [ -109.782404, 35.065849 ], [ -111.166602, 32.296465 ], [ -93.06514, 34.532203 ], [ -119.786562, 34.013289 ], [ -117.08391, 36.495474 ],
                        [ -115.899165, 33.872302 ], [ -118.566104, 36.883792 ], [ -121.426723, 40.494536 ], [ -121.185028, 36.488702 ], [ -124.00611, 41.213671 ],
                        [ -118.571046, 36.479288 ], [ -119.553971, 37.860656 ], [ -107.74342, 38.573703 ], [ -105.616176, 37.785542 ], [ -108.462031, 37.230205 ],
                        [ -105.690322, 40.326351 ], [ -80.207899, 25.48173 ], [ -82.873311, 24.628386 ], [ -80.900241, 25.304263 ], [ -156.146735, 20.718232 ],
                        [ -155.279313, 19.383153 ], [ -87.071028, 41.650323 ], [ -86.144744, 37.186302 ], [ -68.280357, 44.33181 ], [ -88.909865, 47.990392 ],
                        [ -92.849365, 48.472239 ], [ -90.183765, 38.627435 ], [ -113.807752, 48.756214 ], [ -114.260352, 38.925082 ], [ -104.554665, 32.132738 ],
                        [ -106.326552, 32.785165 ], [ -83.56161, 35.611057 ], [ -103.536939, 46.972703 ], [ -81.572164, 41.277865 ], [ -122.110759, 42.937304 ],
                        [ -80.779091, 33.793179 ], [ -102.330352, 43.854575 ], [ -103.447102, 43.569522 ], [ -103.276525, 29.268405 ], [ -104.857748, 31.935124 ],
                        [ -64.74806, 18.342059 ], [ -109.607727, 38.726212 ], [ -112.189529, 37.593496 ], [ -109.91993, 38.208358 ], [ -111.127815, 38.074589 ], 
                        [ -113.028158, 37.294454 ], [ -78.456351, 38.470271 ], [ -121.731428, 46.874788 ], [ -121.322447, 48.766927 ], [ -123.607594, 47.791411 ],
                        [ -81.020216, 37.874744 ], [ -110.691364, 43.778551 ], [ -110.657269, 44.631155 ]]
        //console.log(coords);

        // Map Script
        function drawMap(maplibregl){
            const mapTilerKey = "b1f46c812f0f4a7485e46c797622ab4a"    
            const map = new maplibregl.Map({
            container: "my-map",
            style: `https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=${mapTilerKey}`,
            center: [-102.1585529522404, 40.23519050368728],
            zoom: 2
            })
            
            map.addControl(new maplibregl.NavigationControl());
            
            return map;
        };

        var map = drawMap(maplibregl);

        // Pin Script
        //var latLon =[[-151.187402, 63.097595],[-153.213442, 67.867944], [-136.841242, 58.613727], [-155.070656, 58.610206]];
        //var parks = ["Denali", "Gates of the Arctic", "Glacier Bay", "Katmai", "Kenai Fjords"];

        var latLon = coords; 
        var parks = names;
        addMarkerFromLonLatArr(latLon, parks);

        function addMarkerFromLonLatArr(arr, names){
            // I kept it in terms of i so if you have another array that 
            // has information about said marker you can still reference it
            //let bounds = new maplibregl.LngLatBounds(); // defines the bounds 
            for (let i = 0; i < arr.length; i++){
                let icon = document.createElement('div');
                icon.classList.add("icon");
                icon.setAttribute("id", "icon" + i);
                // This step above allows you to add event handlers for each icon
                let iconPopup = new maplibregl.Popup({
                    anchor: 'bottom',
                    offset: [0, -24] // height - shadow
                })
                .setText(names[i] + ' National Park');
            
                let iconMarker = new maplibregl.Marker(icon, {
                    anchor: 'bottom',
                    offset: [0, 6]
                })
                .setLngLat(arr[i])
                .setPopup(iconPopup)
                .addTo(map);

                //map.setCenter(arr[i])
                // icon.onclick = (event) => {
                    // you can add custom logic here. For example, modify popup.
                //    iconPopup.setHTML(`<p>${event.target.getAttribute('id')}</p>`);
                //    event.stopPropagation();
                //}

                icon.onmouseenter = () => iconMarker.togglePopup(); // show/hide popup on mouse hover
                icon.onmouseleave = () => iconMarker.togglePopup();

            };
        };
    </script>

    </body>
</html>